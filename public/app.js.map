{"version":3,"sources":["webpack:///webpack/bootstrap","webpack:///./src/config.ts","webpack:///./src/utils.ts","webpack:///./src/game-engine.ts","webpack:///./src/keyboard-controls.ts","webpack:///./src/firework/config.ts","webpack:///./src/firework/particle.ts","webpack:///./src/firework/firework.ts","webpack:///./src/firework/star.ts","webpack:///./src/firework/firework-service.ts","webpack:///./node_modules/@ngehlert/event-helper/lib/event-helper.js","webpack:///./src/game-controller.ts","webpack:///./src/color.ts","webpack:///./src/player-manager.ts","webpack:///./src/player.ts","webpack:///./src/index.ts"],"names":["enumerable","get","getter","value","key","bind","module","Object","prototype","hasOwnProperty","call","object","property","Config","canvasWidth","canvasHeight","lineWidth","fps","angleModifier","pixelsPerSecond","scoreBoardWith","holeSize","holeFrequency","getRandomNumber","minimum","maximum","Math","floor","random","EKeyCode","EMouseClick","GameEngine","canvas","players","this","interval","stepsUntilHolePerPlayer","Map","holeSizePerPlayer","speed","playerRanks","canvasContext","prepare","_this","Promise","resolve","reject","resolveCallback","draw","start","window","setInterval","stop","clearInterval","filter","player","isActive","isAlive","forEach","isTurningLeft","angle","isTurningRight","deltaX","cos","PI","deltaY","sin","hitTest","x","xPosition","y","yPosition","unshift","alivePlayers","length","has","id","set","getStepsUntilNextHole","strokeStyle","color","fillStyle","beginPath","moveTo","lineTo","stroke","point","getImageData","data","FireworkConfig","minStrength","maxStrength","minTrails","maxTrails","gravity","airResistance","numberOfStars","fireworkLifeTime","trailLength","delay","Particle","drawingContext","vx","vy","ax","ay","lifeTime","radius","path","update","shift","push","opacity","trunc","closePath","fill","arc","Firework","strength","life","particles","n","i","Star","maxStarRadius","flashingFactor","r","b","FireworkService","withStars","stars","isRunning","mainWithThis","main","firework1","firework2","createStars","saveDrawingSurface","animationId","cancelAnimationFrame","restoreDrawingSurface","star","requestAnimationFrame","previousState","putImageData","EventHelper","name","node","eventName","callback","callbackListener","event","addEventListener","eventCallbacks","entry","removeEventListener","delete","EColor","GameController","playerManager","frameLineWidth","fireworkService","drawKeySettings","startGameEventListener","keyCode","Space","Enter","getNumberOfActivePlayers","drawGameFrames","gameEngine","getPlayers","initializePlayers","startRound","drawPlayingFieldFrame","then","ranks","updateScores","drawScoreboard","getHighestScore","getMaxScore","drawWinningScreen","document","startNextRoundKeyboardEvent","startEngingeKeyboardEvent","textAlign","font","fontSize","playersWon","score","textString","map","join","textWidth","measureText","width","index","textChunk","fillText","resetActiveStatus","resetScores","startNewGameKeyboardEvent","clearRect","strokeRect","getKeyName","leftControl","rightControl","togglePlayerReadyStateKeyboard","togglePlayerReadyStateMouse","activePlayer","preventDefault","button","find","Left","drawPlayerReadyState","Right","inactivePlayer","state","playerIndex","findIndex","currentPlayer","One","Q","LAlt","RAlt","M","Comma","P","SZ","Down","Y","X","rect","padStart","PlayerManager","addPlayer","Error","bindKeyboardControls","removePlayer","Array","from","values","scores","max","apply","Player","_xPosition","_yPosition","_angle","_isAlive","_score","_isTurningLeft","_isTurningRight","_isActive","_id","_name","_color","_leftControl","_rightControl","defineProperty","configurable","onload","body","clientWidth","clientHeight","canvasElement","getElementById","height","getContext","drawIntroText","oneTimeEventListener","player1","Red","player2","Yellow","player3","Orange","player4","Green","player5","Pink","player6","Blue"],"mappings":"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","file":"app.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 0);\n","var Config = /** @class */ (function () {\n    function Config() {\n    }\n    Config.canvasWidth = 0;\n    Config.canvasHeight = 0;\n    Config.lineWidth = 4;\n    Config.fps = 80;\n    /**\n     * Defines how many degrees a line should turn when turning left/right\n     */\n    Config.angleModifier = 2;\n    /**\n     * Defines the speed\n     */\n    Config.pixelsPerSecond = 100;\n    Config.scoreBoardWith = 150;\n    /**\n     * the width of holes\n     */\n    Config.holeSize = 10;\n    /**\n     * Defines the frequency with that holes appear. the lower, the less holes appear.\n     * Has to be greater than 0.\n     */\n    Config.holeFrequency = 10;\n    return Config;\n}());\nexport { Config };\n","function getRandomNumber(minimum, maximum) {\n    return Math.floor(Math.random() * (maximum - minimum + 1)) + minimum;\n}\nexport { getRandomNumber };\n","import { Config } from './config';\nimport { getRandomNumber } from './utils';\nvar GameEngine = /** @class */ (function () {\n    function GameEngine(canvas, players) {\n        this.interval = 0;\n        this.stepsUntilHolePerPlayer = new Map();\n        this.holeSizePerPlayer = new Map();\n        this.speed = Config.pixelsPerSecond * (1000 / Config.fps / 1000);\n        this.playerRanks = [];\n        this.canvasContext = canvas;\n        this.players = players;\n    }\n    GameEngine.prototype.prepare = function () {\n        var _this = this;\n        if (this.interval) {\n            return new Promise(function (resolve) { return resolve([]); });\n        }\n        return new Promise(function (resolve, reject) {\n            _this.resolveCallback = resolve;\n            _this.playerRanks = [];\n            // Start drawing first few pixels so everybody knows his start position\n            _this.draw();\n            _this.draw();\n            _this.draw();\n            _this.draw();\n        });\n    };\n    GameEngine.prototype.start = function () {\n        var _this = this;\n        if (!this.interval) {\n            this.interval = window.setInterval(function () {\n                _this.draw();\n            }, 1000 / Config.fps);\n        }\n    };\n    GameEngine.prototype.stop = function () {\n        clearInterval(this.interval);\n        this.interval = 0;\n        if (this.resolveCallback) {\n            this.resolveCallback(this.playerRanks);\n        }\n    };\n    GameEngine.prototype.draw = function () {\n        var _this = this;\n        this.players\n            .filter(function (player) {\n            return player.isActive && player.isAlive;\n        })\n            .forEach(function (player) {\n            if (player.isTurningLeft) {\n                player.angle -= Config.angleModifier;\n            }\n            if (player.isTurningRight) {\n                player.angle += Config.angleModifier;\n            }\n            var deltaX = Math.cos(player.angle * Math.PI / 180) * _this.speed;\n            var deltaY = Math.sin(player.angle * Math.PI / 180) * _this.speed;\n            if (_this.hitTest({ x: player.xPosition + deltaX, y: player.yPosition + deltaY })) {\n                _this.playerRanks.unshift(player);\n                player.isAlive = false;\n                var alivePlayers = _this.players.filter(function (player) {\n                    return player.isAlive;\n                });\n                if (alivePlayers.length < 2) {\n                    alivePlayers.forEach(function (player) {\n                        _this.playerRanks.unshift(player);\n                    });\n                    _this.stop();\n                }\n            }\n            if (!_this.stepsUntilHolePerPlayer.has(player.id)) {\n                _this.stepsUntilHolePerPlayer.set(player.id, _this.getStepsUntilNextHole());\n            }\n            if (_this.stepsUntilHolePerPlayer.get(player.id) === 0) {\n                if (!_this.holeSizePerPlayer.has(player.id)) {\n                    _this.holeSizePerPlayer.set(player.id, 0);\n                }\n                else {\n                    var holeSize = (_this.holeSizePerPlayer.get(player.id) || 0) + 1;\n                    _this.holeSizePerPlayer.set(player.id, holeSize);\n                    if (holeSize >= Config.holeSize) {\n                        _this.stepsUntilHolePerPlayer.set(player.id, _this.getStepsUntilNextHole());\n                        _this.holeSizePerPlayer.set(player.id, 0);\n                    }\n                }\n            }\n            else {\n                _this.stepsUntilHolePerPlayer.set(player.id, (_this.stepsUntilHolePerPlayer.get(player.id) || 1) - 1);\n                _this.canvasContext.strokeStyle = player.color;\n                _this.canvasContext.fillStyle = player.color;\n                _this.canvasContext.beginPath();\n                _this.canvasContext.lineWidth = Config.lineWidth;\n                _this.canvasContext.moveTo(player.xPosition, player.yPosition);\n                _this.canvasContext.lineTo(player.xPosition + deltaX, player.yPosition + deltaY);\n                _this.canvasContext.stroke();\n            }\n            player.xPosition += deltaX;\n            player.yPosition += deltaY;\n        });\n    };\n    GameEngine.prototype.getStepsUntilNextHole = function () {\n        return Math.floor(getRandomNumber(1, 100) * (100 / Config.holeFrequency));\n    };\n    GameEngine.prototype.hitTest = function (point) {\n        if (point.x > Config.canvasWidth || point.y > Config.canvasHeight || point.x < 0 || point.y < 0) {\n            return true;\n        }\n        if (this.canvasContext.getImageData(point.x, point.y, 1, 1).data[3] > 100) {\n            return true;\n        }\n        return false;\n    };\n    return GameEngine;\n}());\nexport { GameEngine };\n","var EKeyCode;\n(function (EKeyCode) {\n    EKeyCode[EKeyCode[\"One\"] = 49] = \"One\";\n    EKeyCode[EKeyCode[\"Q\"] = 81] = \"Q\";\n    EKeyCode[EKeyCode[\"LAlt\"] = 17] = \"LAlt\";\n    EKeyCode[EKeyCode[\"RAlt\"] = 18] = \"RAlt\";\n    EKeyCode[EKeyCode[\"M\"] = 77] = \"M\";\n    EKeyCode[EKeyCode[\"Comma\"] = 188] = \"Comma\";\n    EKeyCode[EKeyCode[\"P\"] = 80] = \"P\";\n    EKeyCode[EKeyCode[\"SZ\"] = 189] = \"SZ\";\n    EKeyCode[EKeyCode[\"Left\"] = 37] = \"Left\";\n    EKeyCode[EKeyCode[\"Down\"] = 40] = \"Down\";\n    EKeyCode[EKeyCode[\"Space\"] = 32] = \"Space\";\n    EKeyCode[EKeyCode[\"Enter\"] = 13] = \"Enter\";\n    EKeyCode[EKeyCode[\"Y\"] = 89] = \"Y\";\n    EKeyCode[EKeyCode[\"X\"] = 88] = \"X\";\n})(EKeyCode || (EKeyCode = {}));\nvar EMouseClick;\n(function (EMouseClick) {\n    EMouseClick[\"Left\"] = \"Left\";\n    EMouseClick[\"Right\"] = \"Right\";\n})(EMouseClick || (EMouseClick = {}));\nexport { EKeyCode, EMouseClick };\n","var FireworkConfig = /** @class */ (function () {\n    function FireworkConfig() {\n    }\n    FireworkConfig.minStrength = 1.5;\n    FireworkConfig.maxStrength = 7;\n    FireworkConfig.minTrails = 10;\n    FireworkConfig.maxTrails = 30;\n    FireworkConfig.gravity = 5e-2;\n    FireworkConfig.airResistance = 1e-3;\n    FireworkConfig.numberOfStars = 150;\n    FireworkConfig.fireworkLifeTime = 150;\n    FireworkConfig.trailLength = 150;\n    FireworkConfig.delay = 0.5;\n    return FireworkConfig;\n}());\nexport { FireworkConfig };\n","import { FireworkConfig } from './config';\nvar Particle = /** @class */ (function () {\n    function Particle(drawingContext, x, y, vx, vy, ax, ay, color) {\n        this.drawingContext = drawingContext;\n        this.x = x;\n        this.y = y;\n        this.vx = vx;\n        this.vy = vy;\n        this.ax = ax;\n        this.ay = ay;\n        this.color = color;\n        this.lifeTime = FireworkConfig.fireworkLifeTime;\n        this.radius = 3;\n        this.path = [];\n    }\n    Particle.prototype.update = function () {\n        this.lifeTime--;\n        // add point to path but if full, remove a point first\n        if (this.path.length >= FireworkConfig.trailLength)\n            this.path.shift();\n        this.path.push([this.x, this.y]);\n        // update speed n position n stuff\n        this.vy += this.ay;\n        this.vx += this.ax;\n        this.x += this.vx;\n        this.y += this.vy;\n    };\n    Particle.prototype.draw = function () {\n        var opacity = Math.trunc(this.lifeTime * 100 / FireworkConfig.fireworkLifeTime) / 100;\n        // tail\n        this.drawingContext.fillStyle = \"rgba(\" + this.color + \",\" + opacity * 0.4 + \")\";\n        if (this.lifeTime > FireworkConfig.fireworkLifeTime * 0.95) {\n            this.drawingContext.fillStyle = '#fff';\n        }\n        this.drawingContext.lineWidth = 40;\n        this.drawingContext.beginPath();\n        this.drawingContext.moveTo(this.x - this.radius, this.y);\n        this.drawingContext.lineTo(this.path[0][0], this.path[0][1]);\n        this.drawingContext.lineTo(this.x + this.radius, this.y);\n        this.drawingContext.closePath();\n        this.drawingContext.fill();\n        // main dot\n        this.drawingContext.fillStyle = \"rgba(\" + this.color + \",\" + opacity + \")\";\n        if (this.lifeTime > FireworkConfig.fireworkLifeTime * 0.95) {\n            this.drawingContext.fillStyle = '#fff';\n        }\n        this.drawingContext.beginPath();\n        this.drawingContext.arc(Math.trunc(this.x), Math.trunc(this.y), this.radius, 0, Math.PI * 2);\n        this.drawingContext.fill();\n        this.drawingContext.closePath();\n    };\n    return Particle;\n}());\nexport { Particle };\n","import { Config } from '../config';\nimport { Particle } from './particle';\nimport { FireworkConfig } from './config';\nvar Firework = /** @class */ (function () {\n    function Firework(drawingContext) {\n        this.drawingContext = drawingContext;\n        this.x = Config.canvasWidth * (Math.random() * 0.8 + 0.1); // from 0.1-0.9 widths\n        this.y = Config.canvasHeight * (Math.random() * 0.8 + 0.1); // from 0.1-0.9 heights\n        this.strength = Math.random() * (FireworkConfig.maxStrength - FireworkConfig.minStrength)\n            + FireworkConfig.minStrength;\n        this.color = Math.trunc(Math.random() * 255) + \",\" + Math.trunc(Math.random() * 255) + \",\"\n            + (\"\" + Math.trunc(Math.random() * 255));\n        this.life = 0;\n        this.particles = [];\n        var n = ~~(Math.random() * (FireworkConfig.maxTrails - FireworkConfig.minTrails)) + FireworkConfig.minTrails;\n        var ay = FireworkConfig.gravity;\n        for (var i = n; i--;) {\n            var ax = FireworkConfig.airResistance;\n            var angle = i * Math.PI * 2 / n;\n            if (angle < Math.PI) {\n                ax *= -1;\n            }\n            var vx = this.strength * Math.sin(angle);\n            var vy = this.strength * Math.cos(angle);\n            this.particles.push(new Particle(drawingContext, this.x, this.y, vx, vy, ax, ay, this.color));\n        }\n    }\n    Firework.prototype.update = function () {\n        this.life++;\n        if (this.life < 0) {\n            return; // allows life to be delayed\n        }\n        for (var i = this.particles.length; i--;) {\n            this.particles[i].update();\n            this.particles[i].draw();\n        }\n    };\n    return Firework;\n}());\nexport { Firework };\n","import { Config } from '../config';\nvar Star = /** @class */ (function () {\n    function Star(drawingContext) {\n        this.drawingContext = drawingContext;\n        this.maxStarRadius = 3;\n        this.flashingFactor = 0.4;\n        this.x = Math.random() * Config.canvasWidth;\n        this.y = Math.random() * Config.canvasHeight;\n        this.r = Math.random() * this.maxStarRadius;\n        this.b = Math.trunc(Math.random() * 100) / 100;\n    }\n    Star.prototype.draw = function () {\n        this.b += this.flashingFactor * (Math.random() - .5);\n        this.drawingContext.fillStyle = \"rgba(255,255,255,\" + this.b + \")\";\n        this.drawingContext.beginPath();\n        this.drawingContext.arc(Math.trunc(this.x), Math.trunc(this.y), this.r, 0, Math.PI * 2);\n        this.drawingContext.fill();\n        this.drawingContext.closePath();\n    };\n    return Star;\n}());\nexport { Star };\n","import { Firework } from './firework';\nimport { Star } from './star';\nimport { Config } from '../config';\nimport { FireworkConfig } from './config';\nvar FireworkService = /** @class */ (function () {\n    function FireworkService(drawingContext, withStars) {\n        this.drawingContext = drawingContext;\n        this.withStars = withStars;\n        this.stars = [];\n        this.isRunning = false;\n        this.mainWithThis = this.main.bind(this);\n        this.firework1 = new Firework(this.drawingContext);\n        this.firework2 = new Firework(this.drawingContext);\n        this.firework2.life = -FireworkConfig.fireworkLifeTime - FireworkConfig.delay;\n        if (this.withStars) {\n            this.createStars();\n        }\n    }\n    FireworkService.prototype.start = function () {\n        this.saveDrawingSurface();\n        this.isRunning = true;\n        this.main();\n    };\n    FireworkService.prototype.stop = function () {\n        this.isRunning = false;\n        if (this.animationId) {\n            window.cancelAnimationFrame(this.animationId);\n        }\n    };\n    FireworkService.prototype.createStars = function () {\n        for (var i = 0; i < FireworkConfig.numberOfStars; i++) {\n            this.stars.push(new Star(this.drawingContext));\n        }\n    };\n    FireworkService.prototype.main = function () {\n        if (this.isRunning) {\n            this.restoreDrawingSurface();\n        }\n        else {\n            return;\n        }\n        this.stars.forEach(function (star) {\n            star.draw();\n        });\n        this.firework1.update();\n        this.firework2.update();\n        if (this.firework1.life === FireworkConfig.fireworkLifeTime * FireworkConfig.delay) {\n            this.firework2 = new Firework(this.drawingContext);\n        }\n        if (this.firework2.life === FireworkConfig.fireworkLifeTime * FireworkConfig.delay) {\n            this.firework1 = new Firework(this.drawingContext);\n        }\n        if (this.isRunning) {\n            this.animationId = window.requestAnimationFrame(this.mainWithThis);\n        }\n    };\n    FireworkService.prototype.saveDrawingSurface = function () {\n        this.previousState = this.drawingContext.getImageData(0, 0, Config.canvasWidth, Config.canvasHeight);\n    };\n    FireworkService.prototype.restoreDrawingSurface = function () {\n        if (this.previousState) {\n            this.drawingContext.putImageData(this.previousState, 0, 0);\n        }\n    };\n    return FireworkService;\n}());\nexport { FireworkService };\n","/**\n * Helper class for easier registering and deregistering of events\n *\n * This is especially great if you need to register/deregister ES6 arrow functions. Those are pretty ugly to handle.\n *\n * Example:\n * Old:\n * const myMethod = () => {} // do anything\n * const myMethodListener = myMethod.bind(this);\n *\n * document.addEventListener('mousedown', myMethodListener);\n * document.removeEventListener('mousedown', myMethodListener);\n *\n * This does not look to bad, but again this is pretty simplified. If it gets more complex and for example the registering\n * happens in a different class method than the deregistering it gets really noisy and you need to create a lot of extra\n * variables\n *\n * With EventHandler Service:\n *\n * const myMethod = () => {} // do anything\n * EventHandler.addEventListener('myEvent', document, 'mousedown', myMethod.bind(this));\n * EventHandler.removeEventListener('myEvent');\n *\n * Notice the possibility to use inline .bind(this) which is not possible with the regular way because the references get\n * mixed up\n *\n * ============================\n * The last helper methods simply allows you to register a one time event. This event will automatically deregister itself\n * after being executed once\n */\nclass EventHelper {\n    /**\n     * Registers a new event listener and adds it to the stack.\n     *\n     * @param {string} name of the function. should be unique. otherwise there will be conflicts\n     * @param {Node} node that registers the event. Usually something like document or element\n     * @param {string} eventName of the DOM Event that triggers the action. For example keydown, keyup, mousedown, etc.\n     * @param callback that will eventually be executed.\n     */\n    static addEventListener(name, node, eventName, callback) {\n        const callbackListener = (event) => {\n            return callback(event);\n        };\n        node.addEventListener(eventName, callbackListener);\n        this.eventCallbacks.set(name, {\n            node,\n            eventName,\n            callback: callbackListener,\n        });\n    }\n    /**\n     * Removes an existing event listener\n     *\n     * @param {string} name of the event\n     */\n    static removeEventListener(name) {\n        const entry = this.eventCallbacks.get(name);\n        if (entry) {\n            entry.node.removeEventListener(entry.eventName, entry.callback);\n            this.eventCallbacks.delete(name);\n        }\n    }\n    /**\n     * Registers a one time event that will automatically deregister itself after being executed once\n     *\n     * @param {Node} node that registers the event. Usually something like document or element\n     * @param {string} eventName of the DOM Event that triggers the action. For example keydown, keyup, mousedown, etc.\n     * @param callback that will eventually be executed.\n     */\n    static oneTimeEventListener(node, eventName, callback) {\n        const callbackListener = (event) => {\n            node.removeEventListener(eventName, callbackListener);\n            return callback(event);\n        };\n        node.addEventListener(eventName, callbackListener);\n    }\n}\n/**\n * Stack that holds events until they are eventually deregistered\n */\nEventHelper.eventCallbacks = new Map();\nexport { EventHelper };\n","import { Config } from './config';\nimport { GameEngine } from './game-engine';\nimport { EKeyCode, EMouseClick } from './keyboard-controls';\nimport { FireworkService } from './firework/firework-service';\nimport { EventHelper } from '@ngehlert/event-helper';\nvar GameController = /** @class */ (function () {\n    function GameController(drawingContext, playerManager) {\n        this.drawingContext = drawingContext;\n        this.playerManager = playerManager;\n        this.frameLineWidth = 5;\n        this.fireworkService = new FireworkService(this.drawingContext, false);\n        this.drawKeySettings();\n    }\n    /**\n     * This basically starts an entire game.\n     */\n    GameController.prototype.startGameEventListener = function (event) {\n        if (event.keyCode === EKeyCode.Space || event.keyCode === EKeyCode.Enter) {\n            if (this.playerManager.getNumberOfActivePlayers() < 2) {\n                return;\n            }\n            this.drawGameFrames();\n            this.gameEngine = new GameEngine(this.drawingContext, this.playerManager.getPlayers());\n            this.playerManager.initializePlayers();\n            this.startRound();\n            EventHelper.removeEventListener('toggle-ready-keyboard');\n            EventHelper.removeEventListener('toggle-ready-mouse');\n            EventHelper.removeEventListener('start-game');\n        }\n    };\n    /**\n     * Starts a new round.\n     */\n    GameController.prototype.startRound = function () {\n        var _this = this;\n        this.drawPlayingFieldFrame();\n        this.playerManager.initializePlayers();\n        if (this.gameEngine) {\n            this.gameEngine.prepare()\n                .then(function (ranks) {\n                _this.playerManager.updateScores(ranks);\n                _this.drawScoreboard();\n                if (_this.playerManager.getHighestScore() >= _this.getMaxScore()) {\n                    _this.drawWinningScreen();\n                }\n                else {\n                    EventHelper.addEventListener('start-new-round', document, 'keydown', _this.startNextRoundKeyboardEvent.bind(_this));\n                }\n            });\n            EventHelper.addEventListener('start-game-engine', document, 'keydown', this.startEngingeKeyboardEvent.bind(this));\n        }\n    };\n    GameController.prototype.startEngingeKeyboardEvent = function (event) {\n        if (event.keyCode === EKeyCode.Space || event.keyCode === EKeyCode.Enter) {\n            if (this.gameEngine) {\n                this.gameEngine.start();\n            }\n            EventHelper.removeEventListener('start-game-engine');\n        }\n    };\n    GameController.prototype.startNextRoundKeyboardEvent = function (event) {\n        if (event.keyCode === EKeyCode.Space || event.keyCode === EKeyCode.Enter) {\n            if (this.gameEngine) {\n                EventHelper.removeEventListener('start-new-round');\n                this.startRound();\n            }\n        }\n    };\n    GameController.prototype.drawWinningScreen = function () {\n        var _this = this;\n        this.drawingContext.textAlign = 'middle';\n        var fontSize = 40;\n        this.drawingContext.font = fontSize + \"px Fredericka the Great, cursive\";\n        var playersWon = this.playerManager.getPlayers()\n            .filter(function (player) {\n            return player.score === _this.playerManager.getHighestScore();\n        });\n        var textString = playersWon.map(function (player) { return player.name; }).join(', ') + \" won !!!\";\n        var textWidth = this.drawingContext.measureText(textString).width;\n        var xPosition = ((Config.canvasWidth - Config.scoreBoardWith) / 2) - (textWidth / 2);\n        playersWon.forEach(function (player, index) {\n            _this.drawingContext.fillStyle = player.color;\n            var textChunk = \"\" + player.name + (index < playersWon.length - 1 ? ', ' : '');\n            _this.drawingContext.fillText(textChunk, xPosition, (Config.canvasHeight / 2) + (fontSize / 2));\n            xPosition += _this.drawingContext.measureText(textChunk).width;\n        });\n        this.drawingContext.fillStyle = '#ffffff';\n        var textChunk = ' won !!!';\n        this.drawingContext.fillText(textChunk, xPosition, (Config.canvasHeight / 2) + (fontSize / 2));\n        this.fireworkService.start();\n        this.playerManager.resetActiveStatus();\n        this.playerManager.resetScores();\n        EventHelper.addEventListener('start-new-game', document, 'keydown', this.startNewGameKeyboardEvent.bind(this));\n    };\n    GameController.prototype.startNewGameKeyboardEvent = function (event) {\n        if (event.keyCode === EKeyCode.Space || event.keyCode === EKeyCode.Enter) {\n            EventHelper.removeEventListener('start-new-game');\n            this.fireworkService.stop();\n            this.drawKeySettings();\n        }\n    };\n    GameController.prototype.drawKeySettings = function () {\n        var _this = this;\n        this.drawingContext.clearRect(0, 0, Config.canvasWidth, Config.canvasHeight);\n        this.drawingContext.lineWidth = this.frameLineWidth;\n        this.drawingContext.strokeStyle = '#6E6E6E';\n        this.drawingContext.strokeRect(this.frameLineWidth / 2, this.frameLineWidth / 2, Config.canvasWidth - this.frameLineWidth, Config.canvasHeight - this.frameLineWidth);\n        this.playerManager.getPlayers().forEach(function (player, index) {\n            _this.drawingContext.textAlign = 'middle';\n            var fontSize = 20;\n            _this.drawingContext.font = fontSize + \"px Fredericka the Great, cursive\";\n            _this.drawingContext.fillStyle = player.color;\n            _this.drawingContext.fillText(\"( \" + _this.getKeyName(player.leftControl) + \"  \" + _this.getKeyName(player.rightControl) + \" )\", 100, Config.canvasHeight / (_this.playerManager.getPlayers().length + 2) * (index + 1) - (fontSize / 3));\n        });\n        this.drawingContext.textAlign = 'middle';\n        var fontSize = 16;\n        this.drawingContext.font = \"lighter \" + fontSize + \"px Helvetica, Arial, sans-serif\";\n        this.drawingContext.fillStyle = '#ffffff';\n        var textString = 'If 2 or more players have joined, start the game by pressing Space or Enter';\n        var textWidth = this.drawingContext.measureText(textString).width;\n        this.drawingContext.fillText(textString, (Config.canvasWidth / 2) - (textWidth / 2), Config.canvasHeight - 50);\n        EventHelper.addEventListener('toggle-ready-keyboard', document, 'keydown', this.togglePlayerReadyStateKeyboard.bind(this));\n        EventHelper.addEventListener('toggle-ready-mouse', document, 'mousedown', this.togglePlayerReadyStateMouse.bind(this));\n        EventHelper.addEventListener('start-game', document, 'keydown', this.startGameEventListener.bind(this));\n    };\n    GameController.prototype.togglePlayerReadyStateMouse = function (event) {\n        event.preventDefault();\n        if (event.button === 0) {\n            var activePlayer = this.playerManager.getPlayers().find(function (player) {\n                return player.leftControl === EMouseClick.Left;\n            });\n            if (activePlayer) {\n                this.drawPlayerReadyState(activePlayer, true);\n            }\n        }\n        if (event.button === 2) {\n            var activePlayer = this.playerManager.getPlayers().find(function (player) {\n                return player.rightControl === EMouseClick.Right;\n            });\n            if (activePlayer) {\n                this.drawPlayerReadyState(activePlayer, false);\n            }\n        }\n    };\n    GameController.prototype.togglePlayerReadyStateKeyboard = function (event) {\n        var activePlayer = this.playerManager.getPlayers().find(function (player) {\n            return player.leftControl === event.keyCode;\n        });\n        if (activePlayer) {\n            this.drawPlayerReadyState(activePlayer, true);\n        }\n        var inactivePlayer = this.playerManager.getPlayers().find(function (player) {\n            return player.rightControl === event.keyCode;\n        });\n        if (inactivePlayer) {\n            this.drawPlayerReadyState(inactivePlayer, false);\n        }\n    };\n    GameController.prototype.drawPlayerReadyState = function (player, state) {\n        this.drawingContext.textAlign = 'middle';\n        var fontSize = 20;\n        this.drawingContext.font = fontSize + \"px Fredericka the Great, cursive\";\n        this.drawingContext.fillStyle = player.color;\n        var playerIndex = this.playerManager.getPlayers().findIndex(function (currentPlayer) {\n            return currentPlayer === player;\n        });\n        var yPosition = Config.canvasHeight / (this.playerManager.getPlayers().length + 2)\n            * (playerIndex + 1) - (fontSize / 3);\n        this.drawingContext.clearRect(390, yPosition - fontSize, 100, fontSize + 5);\n        player.isActive = state;\n        if (state) {\n            this.drawingContext.fillText('READY', 400, yPosition);\n        }\n    };\n    GameController.prototype.getKeyName = function (keyCode) {\n        switch (keyCode) {\n            case EKeyCode.One:\n                return '1';\n            case EKeyCode.Q:\n                return 'Q';\n            case EKeyCode.LAlt:\n                return 'L . Alt';\n            case EKeyCode.RAlt:\n                return 'R . Alt';\n            case EKeyCode.M:\n                return 'M';\n            case EKeyCode.Comma:\n                return ',';\n            case EKeyCode.P:\n                return 'P';\n            case EKeyCode.SZ:\n                return 'ß';\n            case EKeyCode.Left:\n                return 'L . Arrow';\n            case EKeyCode.Down:\n                return 'D . Arrow';\n            case EKeyCode.Y:\n                return 'Y';\n            case EKeyCode.X:\n                return 'X';\n            case EMouseClick.Left:\n                return 'L . Mouse';\n            case EMouseClick.Right:\n                return 'R . Mouse';\n            default:\n                return '';\n        }\n    };\n    GameController.prototype.drawScoreboard = function () {\n        var _this = this;\n        this.drawingContext.clearRect(Config.canvasWidth - Config.scoreBoardWith, 0, Config.canvasWidth, Config.canvasHeight);\n        this.drawingContext.beginPath();\n        this.drawingContext.rect(Config.canvasWidth - Config.scoreBoardWith, this.frameLineWidth / 2, Config.scoreBoardWith - (this.frameLineWidth / 2), Config.canvasHeight - (this.frameLineWidth));\n        this.drawingContext.fillStyle = '#3C3C3C';\n        this.drawingContext.fill();\n        this.drawingContext.lineWidth = this.frameLineWidth;\n        this.drawingContext.strokeStyle = '#6E6E6E';\n        this.drawingContext.stroke();\n        this.playerManager.getPlayers().forEach(function (player, index) {\n            if (!player.isActive) {\n                return;\n            }\n            _this.drawingContext.textAlign = 'middle';\n            var fontSize = Config.canvasHeight / (_this.playerManager.getPlayers().length + 2);\n            _this.drawingContext.font = fontSize + \"px Fredericka the Great, cursive\";\n            _this.drawingContext.fillStyle = player.color;\n            _this.drawingContext.fillText((\"\" + player.score).padStart(2, ' '), Config.canvasWidth - (Config.scoreBoardWith / 1.25) - (4 * _this.frameLineWidth), Config.canvasHeight / _this.playerManager.getPlayers().length * (index + 1) - (fontSize / 3));\n        });\n    };\n    GameController.prototype.drawGameFrames = function () {\n        this.drawPlayingFieldFrame();\n        this.drawScoreboard();\n    };\n    GameController.prototype.drawPlayingFieldFrame = function () {\n        this.drawingContext.clearRect(0, 0, Config.canvasWidth - Config.scoreBoardWith, Config.canvasHeight);\n        this.drawingContext.lineWidth = this.frameLineWidth;\n        this.drawingContext.strokeStyle = '#6E6E6E';\n        this.drawingContext.strokeRect(this.frameLineWidth / 2, this.frameLineWidth / 2, Config.canvasWidth - Config.scoreBoardWith - (this.frameLineWidth / 2), Config.canvasHeight - this.frameLineWidth);\n    };\n    GameController.prototype.getMaxScore = function () {\n        return (this.playerManager.getNumberOfActivePlayers() - 1) * 10;\n    };\n    return GameController;\n}());\nexport { GameController };\n","var EColor;\n(function (EColor) {\n    EColor[\"Red\"] = \"#CC361F\";\n    EColor[\"Yellow\"] = \"#DBDE4B\";\n    EColor[\"Orange\"] = \"#EC7B34\";\n    EColor[\"Green\"] = \"#5FD441\";\n    EColor[\"Pink\"] = \"#DA4FAF\";\n    EColor[\"Blue\"] = \"#4AAAD7\";\n})(EColor || (EColor = {}));\nexport { EColor };\n","import { Config } from './config';\nimport { getRandomNumber } from './utils';\nimport { EMouseClick } from './keyboard-controls';\nvar PlayerManager = /** @class */ (function () {\n    function PlayerManager() {\n        this.players = new Map();\n    }\n    PlayerManager.prototype.addPlayer = function (player) {\n        if (this.players.has(player.id)) {\n            throw new Error('Player with given Id already existing');\n        }\n        this.players.set(player.id, player);\n        this.bindKeyboardControls(player);\n    };\n    PlayerManager.prototype.removePlayer = function (player) {\n        this.players.delete(player.id);\n        // technically we need to unbind keyboard controls here\n        // method currently unused so ¯\\_(ツ)_/¯\n    };\n    PlayerManager.prototype.initializePlayers = function () {\n        Array.from(this.players.values())\n            .filter(function (player) {\n            return player.isActive;\n        })\n            .forEach(function (player) {\n            player.xPosition = getRandomNumber((Config.canvasWidth - Config.scoreBoardWith) / 5, 4 * (Config.canvasWidth - Config.scoreBoardWith) / 5);\n            player.yPosition = getRandomNumber(Config.canvasHeight / 5, 4 * Config.canvasHeight / 5);\n            player.angle = Math.random() * 360;\n            player.isAlive = true;\n        });\n    };\n    PlayerManager.prototype.bindKeyboardControls = function (player) {\n        // Todo: To beb consistent we should use the EventHandler here...\n        document.addEventListener('keydown', function (event) {\n            event.preventDefault();\n            if (event.keyCode === player.leftControl) {\n                player.isTurningLeft = true;\n            }\n            if (event.keyCode === player.rightControl) {\n                player.isTurningRight = true;\n            }\n        });\n        document.addEventListener('keyup', function (event) {\n            event.preventDefault();\n            if (event.keyCode === player.leftControl) {\n                player.isTurningLeft = false;\n            }\n            if (event.keyCode === player.rightControl) {\n                player.isTurningRight = false;\n            }\n        });\n        document.addEventListener('mousedown', function (event) {\n            event.preventDefault();\n            if (event.button === 0) {\n                if (player.leftControl === EMouseClick.Left) {\n                    player.isTurningLeft = true;\n                }\n                if (player.rightControl === EMouseClick.Left) {\n                    player.isTurningRight = true;\n                }\n            }\n            if (event.button === 2) {\n                if (player.leftControl === EMouseClick.Right) {\n                    player.isTurningLeft = true;\n                }\n                if (player.rightControl === EMouseClick.Right) {\n                    player.isTurningRight = true;\n                }\n            }\n        });\n        document.addEventListener('mouseup', function (event) {\n            event.preventDefault();\n            if (event.button === 0) {\n                if (player.leftControl === EMouseClick.Left) {\n                    player.isTurningLeft = false;\n                }\n                if (player.rightControl === EMouseClick.Left) {\n                    player.isTurningRight = false;\n                }\n            }\n            if (event.button === 2) {\n                if (player.leftControl === EMouseClick.Right) {\n                    player.isTurningLeft = false;\n                }\n                if (player.rightControl === EMouseClick.Right) {\n                    player.isTurningRight = false;\n                }\n            }\n        });\n    };\n    PlayerManager.prototype.getPlayers = function () {\n        return Array.from(this.players.values());\n    };\n    PlayerManager.prototype.getNumberOfActivePlayers = function () {\n        return this.getPlayers().filter(function (player) {\n            return player.isActive;\n        }).length;\n    };\n    PlayerManager.prototype.updateScores = function (ranks) {\n        var _this = this;\n        ranks.forEach(function (player, index) {\n            player.score += _this.getNumberOfActivePlayers() - index - 1;\n        });\n    };\n    PlayerManager.prototype.getHighestScore = function () {\n        var scores = Array.from(this.players.values()).map(function (player) {\n            return player.score;\n        });\n        return Math.max.apply(Math, scores);\n    };\n    PlayerManager.prototype.resetActiveStatus = function () {\n        Array.from(this.players.values()).forEach(function (player) {\n            player.isActive = false;\n        });\n    };\n    PlayerManager.prototype.resetScores = function () {\n        Array.from(this.players.values()).forEach(function (player) {\n            player.score = 0;\n        });\n    };\n    return PlayerManager;\n}());\nexport { PlayerManager };\n","var Player = /** @class */ (function () {\n    function Player(id, name, color, leftControl, rightControl) {\n        this._xPosition = 0;\n        this._yPosition = 0;\n        this._angle = 0;\n        this._isAlive = false;\n        this._score = 0;\n        this._isTurningLeft = false;\n        this._isTurningRight = false;\n        this._isActive = false;\n        this._id = id;\n        this._name = name;\n        this._color = color;\n        this._leftControl = leftControl;\n        this._rightControl = rightControl;\n    }\n    Object.defineProperty(Player.prototype, \"id\", {\n        get: function () {\n            return this._id;\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(Player.prototype, \"name\", {\n        get: function () {\n            return this._name;\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(Player.prototype, \"color\", {\n        get: function () {\n            return this._color;\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(Player.prototype, \"xPosition\", {\n        get: function () {\n            return this._xPosition;\n        },\n        set: function (value) {\n            this._xPosition = value;\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(Player.prototype, \"yPosition\", {\n        get: function () {\n            return this._yPosition;\n        },\n        set: function (value) {\n            this._yPosition = value;\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(Player.prototype, \"angle\", {\n        get: function () {\n            return this._angle;\n        },\n        set: function (value) {\n            this._angle = value;\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(Player.prototype, \"isAlive\", {\n        get: function () {\n            return this._isAlive;\n        },\n        set: function (value) {\n            this._isAlive = value;\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(Player.prototype, \"score\", {\n        get: function () {\n            return this._score;\n        },\n        set: function (value) {\n            this._score = value;\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(Player.prototype, \"isTurningLeft\", {\n        get: function () {\n            return this._isTurningLeft;\n        },\n        set: function (value) {\n            this._isTurningLeft = value;\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(Player.prototype, \"isTurningRight\", {\n        get: function () {\n            return this._isTurningRight;\n        },\n        set: function (value) {\n            this._isTurningRight = value;\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(Player.prototype, \"leftControl\", {\n        get: function () {\n            return this._leftControl;\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(Player.prototype, \"rightControl\", {\n        get: function () {\n            return this._rightControl;\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(Player.prototype, \"isActive\", {\n        get: function () {\n            return this._isActive;\n        },\n        set: function (value) {\n            this._isActive = value;\n        },\n        enumerable: true,\n        configurable: true\n    });\n    return Player;\n}());\nexport { Player };\n","import { GameController } from './game-controller';\nimport { PlayerManager } from './player-manager';\nimport { Player } from './player';\nimport { EColor } from './color';\nimport { Config } from './config';\nimport { EKeyCode, EMouseClick } from './keyboard-controls';\nimport { EventHelper } from '@ngehlert/event-helper';\nwindow.onload = function () {\n    Config.canvasWidth = IS_ELECTRON_BUILD ? document.body.clientWidth : document.body.clientWidth - 20;\n    Config.canvasHeight = IS_ELECTRON_BUILD ? document.body.clientHeight : document.body.clientHeight - 50;\n    var canvasId = 'canvas';\n    var canvasElement = document.getElementById(canvasId);\n    if (!canvasElement) {\n        throw new Error('No canvas element found');\n    }\n    canvasElement.width = Config.canvasWidth;\n    canvasElement.height = Config.canvasHeight;\n    var drawingContext;\n    if (canvasElement.getContext) {\n        drawingContext = canvasElement.getContext('2d');\n    }\n    else {\n        throw new Error('No canvas support');\n    }\n    drawIntroText();\n    EventHelper.oneTimeEventListener(document, 'keydown', initGame);\n    function drawIntroText() {\n        var frameLineWidth = 5;\n        drawingContext.lineWidth = frameLineWidth;\n        drawingContext.strokeStyle = '#6E6E6E';\n        drawingContext.strokeRect(frameLineWidth / 2, frameLineWidth / 2, Config.canvasWidth - frameLineWidth, Config.canvasHeight - frameLineWidth);\n        drawingContext.textAlign = 'middle';\n        var fontSize = Config.canvasHeight / 10;\n        drawingContext.font = fontSize + \"px Fredericka the Great, cursive\";\n        drawingContext.fillStyle = '#ffffff';\n        var textString = 'Achtung, die Kurve !';\n        var textWidth = drawingContext.measureText(textString).width;\n        drawingContext.fillText(textString, (Config.canvasWidth / 2) - (textWidth / 2), (Config.canvasHeight / 2) + (fontSize / 2));\n        drawingContext.textAlign = 'middle';\n        drawingContext.font = 'lighter 16px Helvetica, Arial, sans-serif';\n        drawingContext.fillStyle = '#ffffff';\n        textString = 'Press any key to continue';\n        textWidth = drawingContext.measureText(textString).width;\n        drawingContext.fillText(textString, (Config.canvasWidth / 2) - (textWidth / 2), Config.canvasHeight - 50);\n    }\n    function initGame() {\n        var playerManager = new PlayerManager();\n        var player1 = new Player(1, 'Player 1', EColor.Red, EKeyCode.One, EKeyCode.Q);\n        playerManager.addPlayer(player1);\n        var player2 = new Player(2, 'Player 2', EColor.Yellow, EKeyCode.Y, EKeyCode.X);\n        playerManager.addPlayer(player2);\n        var player3 = new Player(3, 'Player 3', EColor.Orange, EKeyCode.M, EKeyCode.Comma);\n        playerManager.addPlayer(player3);\n        var player4 = new Player(4, 'Player 4', EColor.Green, EKeyCode.Left, EKeyCode.Down);\n        playerManager.addPlayer(player4);\n        var player5 = new Player(5, 'Player 5', EColor.Pink, EKeyCode.P, EKeyCode.SZ);\n        playerManager.addPlayer(player5);\n        var player6 = new Player(6, 'Player 6', EColor.Blue, EMouseClick.Left, EMouseClick.Right);\n        playerManager.addPlayer(player6);\n        var game = new GameController(drawingContext, playerManager);\n    }\n};\n"],"sourceRoot":""}